name: Create Issue Branch on Label Assignment

on:
  issues:
    types: [labeled]  # ì´ìŠˆì— ë¼ë²¨ì´ ì¶”ê°€ë  ë•Œ ì‹¤í–‰

jobs:
  create_issue_branch_job:
    runs-on: ubuntu-latest
    steps:
      - name: Extract Issue Number
        id: extract_issue
        run: echo "ISSUE_NUMBER=${{ github.event.issue.number }}" >> $GITHUB_ENV

      - name: Convert Korean Label to English
        id: convert_label
        run: |
          case "${{ github.event.label.name }}" in
            "âœ¨ ê¸°ëŠ¥") LABEL="feature" ;;
            "ðŸž ë²„ê·¸") LABEL="bugfix" ;;
            "âš™ï¸ ì„¤ì •") LABEL="chore" ;;
            "ðŸ”¨ ë¦¬íŽ™í† ë§") LABEL="refactor" ;;
            "âœ… í…ŒìŠ¤íŠ¸") LABEL="test" ;;
            "ðŸ“ƒ ë¬¸ì„œ") LABEL="docs" ;;
            *) LABEL="" ;;  # ì •ì˜ë˜ì§€ ì•Šì€ ë¼ë²¨ì´ë©´ ë¬´ì‹œ
          esac
          echo "LABEL=$LABEL" >> $GITHUB_ENV

      - name: Create Issue Branch (Only if Valid Label Exists)
        if: env.LABEL != ''
        uses: robvanderleek/create-issue-branch@main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          branchName: '#${{ env.ISSUE_NUMBER }}'
          prefix: '${{ env.LABEL }}/'